# Cogent Agent - NATS Server Configuration

# Server identification
server_name: cogent-nats

# Client connections
port: 4222
max_connections: 1000
max_payload: 8MB

# HTTP monitoring interface
http_port: 8222
http_base_path: /

# Logging
debug: false
trace: false
logtime: true
log_size_limit: 100MB

# JetStream configuration
jetstream {
    # Storage directory
    store_dir: /data

    # Memory storage limit
    max_mem: 256MB

    # File storage limit
    max_file: 1GB

    # Domain for multi-cluster setups (future)
    # domain: cogent
}

# Authorization (basic - enhance for production)
# For development, allow all connections
# In production, use token or NKey authentication

# no_auth_user: cogent

# Accounts for multi-tenancy (future)
# accounts {
#     COGENT {
#         users: [
#             { user: agent, password: $AGENT_PASSWORD }
#             { user: cli, password: $CLI_PASSWORD }
#         ]
#         jetstream: enabled
#     }
# }

# Cluster configuration (for future horizontal scaling)
# cluster {
#     name: cogent-cluster
#     port: 6222
#     routes: []
# }

# WebSocket support for browser clients
websocket {
    port: 9222
    no_tls: true  # Enable TLS in production
    # tls {
    #     cert_file: /etc/nats/certs/server.crt
    #     key_file: /etc/nats/certs/server.key
    # }
}

# Ping/Pong for connection health
ping_interval: "30s"
ping_max: 3

# Write deadline for slow consumers
write_deadline: "10s"
